<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ArchStore</title>
        <link rel="stylesheet" href="./css/variables.css" />
        <link rel="stylesheet" href="./css/base.css" />
        <link rel="stylesheet" href="./css/layout.css" />
        <link rel="stylesheet" href="./css/components.css" />
        <link rel="stylesheet" href="./css/modals.css" />
    </head>
    <body>
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <img
                            src="/assets/icons/arch-logo.png"
                            alt="Arch Linux"
                            style="height: 32px; width: 32px"
                        />
                        ArchStore
                    </div>
                    <div class="search-container">
                        <input
                            type="text"
                            class="search-input"
                            id="search-input"
                            placeholder="Search packages..."
                            autocomplete="off"
                        />
                        <div style="position: relative">
                            <button class="filter-sort-btn" id="filter-btn">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <line x1="4" y1="6" x2="20" y2="6" />
                                    <line x1="4" y1="12" x2="16" y2="12" />
                                    <line x1="4" y1="18" x2="12" y2="18" />
                                </svg>
                                Filter
                            </button>
                            <div
                                class="filter-sort-dropdown"
                                id="filter-dropdown"
                            >
                                <div class="dropdown-section">
                                    <div class="dropdown-label">
                                        Install Status
                                    </div>
                                    <div
                                        class="dropdown-option"
                                        data-filter="all"
                                    >
                                        <span>All Packages</span>
                                        <span class="checkmark">✓</span></span>
                                    </div>
                                    <div
                                        class="dropdown-option"
                                        data-filter="installed"
                                    >
                                        <span>Installed Only</span>
                                        <span class="checkmark">✓</span>
                                    </div>
                                    <div
                                        class="dropdown-option"
                                        data-filter="not-installed"
                                    >
                                        <span>Not Installed</span>
                                        <span class="checkmark">✓</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="position: relative">
                            <button class="filter-sort-btn" id="sort-btn">
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path d="M11 5h10" />
                                    <path d="M11 9h7" />
                                    <path d="M11 13h4" />
                                    <line x1="4" y1="5" x2="4" y2="19" />
                                    <polyline points="7 15 4 19 1 15" />
                                </svg>
                                Sort
                            </button>
                            <div
                                class="filter-sort-dropdown"
                                id="sort-dropdown"
                            >
                                <div class="dropdown-section">
                                    <div class="dropdown-label">Sort By</div>
                                    <div
                                        class="dropdown-option selected"
                                        data-sort="relevance"
                                    >
                                        <span>Relevance</span>
                                        <span class="checkmark">✓</span>
                                    </div>
                                    <div
                                        class="dropdown-option"
                                        data-sort="name"
                                    >
                                        <span>Name (A-Z)</span>
                                        <span class="checkmark">✓</span>
                                    </div>
                                    <div
                                        class="dropdown-option"
                                        data-sort="name-desc"
                                    >
                                        <span>Name (Z-A)</span>
                                        <span class="checkmark">✓</span>
                                    </div>
                                    <div
                                        class="dropdown-option"
                                        data-sort="source"
                                    >
                                        <span>Source</span>
                                        <span class="checkmark">✓</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-tabs">
                        <button class="tab-btn active" data-source="all">
                            All
                        </button>
                        <button class="tab-btn" data-source="official">
                            Official
                        </button>
                        <button class="tab-btn" data-source="aur">AUR</button>
                        <button class="tab-btn" data-source="flatpak">
                            Flatpak
                        </button>
                    </div>
                    <button
                        id="settings-btn"
                        style="
                            background: transparent;
                            border: none;
                            padding: 8px;
                            cursor: pointer;
                            color: var(--text-secondary);
                            transition: color 0.2s;
                        "
                        onmouseover="this.style.color='var(--text-primary)'"
                        onmouseout="this.style.color='var(--text-secondary)'"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path
                                d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                            ></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <main>
            <div class="container">
                <div id="packages-container">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading packages...</p>
                    </div>
                </div>
            </div>
        </main>

        <div class="modal" id="install-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">
                        Installing <span id="modal-package-name"></span>
                    </h2>
                    <button class="close-btn" id="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="terminal" id="terminal-output">
                        <div class="terminal-line">
                            Initializing installation...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="update-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Updating System</h2>
                    <button class="close-btn" id="close-update-modal">
                        &times;
                    </button>
                </div>
                <div class="modal-body">
                    <div class="progress-bar" style="margin-bottom: 16px">
                        <div
                            class="progress-fill"
                            id="update-progress-fill"
                        ></div>
                    </div>

                    <!-- Terminal Window -->
                    <div style="
                        background: #0d0d0d;
                        border: 2px solid #2a2a2a;
                        border-radius: 10px;
                        overflow: hidden;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                    ">
                        <!-- Terminal Header -->
                        <div style="
                            background: linear-gradient(180deg, #2a2a2a 0%, #1f1f1f 100%);
                            padding: 8px 12px;
                            display: flex;
                            align-items: center;
                            gap: 8px;
                            border-bottom: 1px solid #3a3a3a;
                        ">
                            <div style="display: flex; gap: 6px;">
                                <div style="width: 12px; height: 12px; border-radius: 50%; background: #ff5f56;"></div>
                                <div style="width: 12px; height: 12px; border-radius: 50%; background: #ffbd2e;"></div>
                                <div style="width: 12px; height: 12px; border-radius: 50%; background: #27c93f;"></div>
                            </div>
                            <div style="
                                flex: 1;
                                text-align: center;
                                font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
                                font-size: 11px;
                                color: #808080;
                                font-weight: 600;
                            ">
                                ArchStore Update Terminal
                            </div>
                        </div>

                        <!-- Terminal Output -->
                        <div class="terminal" id="update-terminal-output" style="
                            background: #1a1b26;
                            padding: 20px;
                            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
                            font-size: 13px;
                            max-height: 450px;
                            min-height: 300px;
                            overflow-y: auto;
                            color: #a9b1d6;
                            line-height: 1.8;
                        ">
                            <div class="terminal-line" style="color: #7aa2f7;">
                                Initializing system update...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="settings-modal">
            <div class="modal-content" style="max-width: 500px">
                <div class="modal-header">
                    <h2 class="modal-title">Settings</h2>
                    <button class="close-btn" id="close-settings-modal">
                        &times;
                    </button>
                </div>
                <div class="modal-body">
                    <h3
                        style="
                            font-size: 14px;
                            font-weight: 600;
                            margin-bottom: 16px;
                            color: var(--text-primary);
                        "
                    >
                        System Updates
                    </h3>

                    <div style="margin-bottom: 24px">
                        <button
                            id="check-updates-btn"
                            style="
                                width: 100%;
                                padding: 12px;
                                background: var(--accent);
                                border: none;
                                border-radius: 8px;
                                color: white;
                                font-size: 14px;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.2s;
                            "
                        >
                            Check for Updates
                        </button>
                        <div
                            id="updates-list"
                            style="margin-top: 12px; display: none"
                        >
                            <div
                                style="
                                    font-size: 13px;
                                    color: var(--text-secondary);
                                    margin-bottom: 12px;
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                "
                            >
                                <div>
                                    <strong><span id="updates-count">0</span></strong> updates available
                                    <span id="selected-count" style="margin-left: 8px; color: var(--text-secondary); font-size: 12px;">
                                        (<span id="selected-count-number">0</span> selected)
                                    </span>
                                </div>
                                <button
                                    id="check-all-updates"
                                    style="
                                        padding: 4px 10px;
                                        background: var(--bg-tertiary);
                                        border: 1px solid var(--border);
                                        border-radius: 4px;
                                        color: var(--text-primary);
                                        font-size: 12px;
                                        cursor: pointer;
                                        transition: all 0.2s;
                                    "
                                >
                                    Uncheck All
                                </button>
                            </div>

                            <!-- Package List with individual checkboxes -->
                            <div
                                id="updates-container"
                                style="
                                    max-height: 400px;
                                    overflow-y: auto;
                                    background: var(--bg-tertiary);
                                    border-radius: 8px;
                                    padding: 8px;
                                    margin-bottom: 8px;
                                "
                            ></div>

                            <button
                                id="update-selected-btn"
                                style="
                                    width: 100%;
                                    padding: 10px;
                                    background: var(--success);
                                    border: none;
                                    border-radius: 6px;
                                    color: white;
                                    font-size: 13px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.2s;
                                "
                            >
                                Update Selected
                            </button>
                        </div>
                    </div>

                    <h3
                        style="
                            font-size: 14px;
                            font-weight: 600;
                            margin-bottom: 16px;
                            color: var(--text-primary);
                        "
                    >
                        Package Sources
                    </h3>

                    <label
                        style="
                            display: flex;
                            align-items: center;
                            padding: 12px;
                            background: var(--bg-tertiary);
                            border-radius: 8px;
                            margin-bottom: 8px;
                            cursor: pointer;
                        "
                    >
                        <input
                            type="checkbox"
                            id="enable-aur"
                            checked
                            style="width: 18px; height: 18px; cursor: pointer"
                        />
                        <div style="margin-left: 12px">
                            <div
                                style="
                                    font-weight: 500;
                                    color: var(--text-primary);
                                "
                            >
                                AUR (Arch User Repository)
                            </div>
                            <div
                                style="
                                    font-size: 12px;
                                    color: var(--text-secondary);
                                "
                            >
                                Community-maintained packages
                            </div>
                        </div>
                    </label>

                    <label
                        style="
                            display: flex;
                            align-items: center;
                            padding: 12px;
                            background: var(--bg-tertiary);
                            border-radius: 8px;
                            margin-bottom: 8px;
                            cursor: pointer;
                        "
                    >
                        <input
                            type="checkbox"
                            id="enable-flatpak"
                            checked
                            style="width: 18px; height: 18px; cursor: pointer"
                        />
                        <div style="margin-left: 12px">
                            <div
                                style="
                                    font-weight: 500;
                                    color: var(--text-primary);
                                "
                            >
                                Flatpak
                            </div>
                            <div
                                style="
                                    font-size: 12px;
                                    color: var(--text-secondary);
                                "
                            >
                                Sandboxed applications
                            </div>
                        </div>
                    </label>

                    <label
                        style="
                            display: flex;
                            align-items: center;
                            padding: 12px;
                            background: var(--bg-tertiary);
                            border-radius: 8px;
                            cursor: pointer;
                        "
                    >
                        <input
                            type="checkbox"
                            id="enable-multilib"
                            style="width: 18px; height: 18px; cursor: pointer"
                        />
                        <div style="margin-left: 12px">
                            <div
                                style="
                                    font-weight: 500;
                                    color: var(--text-primary);
                                "
                            >
                                Multilib
                            </div>
                            <div
                                style="
                                    font-size: 12px;
                                    color: var(--text-secondary);
                                "
                            >
                                32-bit packages on 64-bit system
                            </div>
                        </div>
                    </label>

                    <div
                        id="multilib-password-prompt"
                        style="display: none; margin-top: 16px"
                    >
                        <div
                            style="
                                font-size: 13px;
                                color: var(--text-secondary);
                                margin-bottom: 8px;
                            "
                        >
                            Enabling multilib requires sudo password:
                        </div>
                        <input
                            type="password"
                            id="sudo-password"
                            placeholder="Enter sudo password"
                            style="
                                width: 100%;
                                padding: 10px;
                                background: var(--bg-primary);
                                border: 1px solid var(--border);
                                border-radius: 6px;
                                color: var(--text-primary);
                                font-size: 14px;
                            "
                        />
                        <div
                            id="password-error"
                            style="
                                color: var(--error);
                                font-size: 12px;
                                margin-top: 8px;
                                display: none;
                            "
                        ></div>
                    </div>

                    <div
                        style="
                            margin-top: 20px;
                            padding-top: 20px;
                            border-top: 1px solid var(--border);
                        "
                    >
                        <button
                            class="install-btn"
                            id="save-settings"
                            style="width: 100%"
                        >
                            Save Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script type="module" src="./js/main.js"></script>
    </body>
</html>
